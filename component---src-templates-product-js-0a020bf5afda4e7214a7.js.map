{"version":3,"sources":["webpack:///./src/components/LiveStock.js","webpack:///./src/templates/Product.js"],"names":["LiveStock","productId","useState","stock","setStock","loading","setLoading","useEffect","auth","btoa","process","GATSBY_WOO_CONSUMER_KEY","GATSBY_WOO_CONSUMER_SECRET","fetch","method","headers","Authorization","then","res","json","stock_quantity","SingleProductPage","product","data","style","overflow","to","position","display","name","on_sale","fontSize","borderRadius","background","color","padding","right","top","transform","wooCommerceId","dangerouslySetInnerHTML","__html","price_html","images","map","image","i","key","src","alt","width","marginBottom"],"mappings":"2FAAA,2DAEe,SAASA,EAAT,GAAmC,IAAdC,EAAa,EAAbA,UAAa,EACrBC,mBAAS,cAA5BC,EADwC,KACjCC,EADiC,OAEjBF,oBAAS,GAAhCG,EAFwC,KAE/BC,EAF+B,KAmB/C,OAfAC,qBAAU,WACR,IAAMC,EAAOC,KACRC,GAAYC,wBADA,IAC2BD,GAAYE,4BAExDC,MAAM,wDAAwDZ,EAAa,CACzEa,OAAQ,MACRC,QAAS,CAAEC,cAAc,SAAUR,KAElCS,MAAK,SAAAC,GAAG,OAAIA,EAAIC,UAChBF,MAAK,SAAAC,GACJd,EAASc,EAAIE,gBACbd,GAAW,QAEd,CAACL,IAGF,oCACE,8BACGI,EAAO,6BAAqCF,EAArC,gB,kCCxBhB,gGAIe,SAASkB,EAAT,GAAmD,IAAdC,EAAa,EAArBC,KAAQD,QAClD,OACE,yBAAKE,MAAO,CAAEC,SAAU,WACtB,kBAAC,IAAD,CAAMC,GAAG,KACP,oCAEF,wBAAIF,MAAO,CAAEG,SAAU,WAAYC,QAAS,iBACzCN,EAAQO,KACRP,EAAQQ,SACP,0BACEN,MAAO,CACLO,SAAU,GACVC,aAAc,OACdC,WAAY,gBACZC,MAAO,OACPC,QAAS,GACTR,SAAU,WACVS,OAAQ,GACRC,KAAM,GACNC,UAAW,kBAVf,UAiBJ,6BACE,kBAAC,IAAD,CAAWrC,UAAWqB,EAAQiB,iBAEhC,yBAAKC,wBAAyB,CAAEC,OAAQnB,EAAQoB,cAC/CpB,EAAQqB,QACPrB,EAAQqB,OAAOC,KAAI,SAACC,EAAOC,GAAR,OACjB,yBACEC,IAAKD,EACLE,IAAKH,EAAMG,IACXC,IAAKJ,EAAMhB,KACXL,MAAO,CAAEI,QAAS,QAASsB,MAAO,OAAQC,aAAc","file":"component---src-templates-product-js-0a020bf5afda4e7214a7.js","sourcesContent":["import React, { useState, useEffect } from \"react\"\n\nexport default function LiveStock({ productId }) {\n  const [stock, setStock] = useState(\"loading...\")\n  const [loading, setLoading] = useState(true)\n\n  useEffect(() => {\n    const auth = btoa(\n      `${process.env.GATSBY_WOO_CONSUMER_KEY}:${process.env.GATSBY_WOO_CONSUMER_SECRET}`\n    )\n    fetch(`https://shop.twinstrippin.com/wp-json/wc/v3/products/${productId}`, {\n      method: \"GET\",\n      headers: { Authorization: `Basic ${auth}` },\n    })\n      .then(res => res.json())\n      .then(res => {\n        setStock(res.stock_quantity)\n        setLoading(false)\n      })\n  }, [productId])\n\n  return (\n    <>\n      <span>\n        {loading ? `fetching stock quantity...` : `${stock} in stock`}\n      </span>\n    </>\n  )\n}\n","import React from \"react\"\nimport { graphql, Link } from \"gatsby\"\nimport LiveStock from \"../components/LiveStock\"\n\nexport default function SingleProductPage({ data: { product } }) {\n  return (\n    <div style={{ overflow: \"hidden\" }}>\n      <Link to=\"/\">\n        <p>Home</p>\n      </Link>\n      <h1 style={{ position: \"relative\", display: \"inline-block\" }}>\n        {product.name}\n        {product.on_sale && (\n          <span\n            style={{\n              fontSize: 14,\n              borderRadius: \"100%\",\n              background: \"rebeccapurple\",\n              color: \"#fff\",\n              padding: 10,\n              position: \"absolute\",\n              right: -50,\n              top: -20,\n              transform: \"rotate(20deg)\",\n            }}\n          >\n            SALE!\n          </span>\n        )}\n      </h1>\n      <div>\n        <LiveStock productId={product.wooCommerceId} />\n      </div>\n      <div dangerouslySetInnerHTML={{ __html: product.price_html }} />\n      {product.images &&\n        product.images.map((image, i) => (\n          <img\n            key={i}\n            src={image.src}\n            alt={image.name}\n            style={{ display: \"block\", width: \"100%\", marginBottom: \"1rem\" }}\n          />\n        ))}\n    </div>\n  )\n}\n\n// This needs to be dynamic based on the slug passed in via context in gatsby-node.js\nexport const query = graphql`\n  query($id: String!) {\n    product: wcProduct(id: { eq: $id }) {\n      name\n      id\n      wooCommerceId\n      slug\n      on_sale\n      images {\n        name\n        src\n      }\n      price_html\n    }\n  }\n`\n"],"sourceRoot":""}